<!DOCTYPE html>
<html lang="fr" dir="ltr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="theme-color" content="#0f172a">
  <title>Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ - Amar Informatique</title>

  <link rel="icon" href="logo.jpg" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --bg-dark: #0f172a;
      --bg-card: rgba(30, 41, 59, 0.7);
      --primary-color: #7c3aed;
      --primary-glow: #8b5cf6;
      --text-main: #f8fafc;
      --text-muted: #94a3b8;
      --glass-border: 1px solid rgba(255, 255, 255, 0.1);
      --neon-shadow: 0 0 15px rgba(124, 58, 237, 0.3);
      --radius-lg: 20px;
      --transition: all 0.3s ease;
      --glass-bg: rgba(255, 255, 255, 0.03);
      
      /* Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ */
      --color-fast: #22c55e;      /* Ø£Ø®Ø¶Ø±: 24-48h */
      --color-medium: #f59e0b;    /* Ø£ØµÙØ±: 48-72h */
      --color-slow: #ef4444;      /* Ø£Ø­Ù…Ø±: 72-96h */
      --color-fast-glow: rgba(34, 197, 94, 0.4);
      --color-medium-glow: rgba(245, 158, 11, 0.4);
      --color-slow-glow: rgba(239, 68, 68, 0.4);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Outfit', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: var(--text-main);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ===== HEADER ===== */
    header {
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(12px);
      border-bottom: var(--glass-border);
      padding: 0.8rem 0;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .navbar .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: min(92%, 1400px);
      margin: 0 auto;
      padding: 0 1rem;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo img {
      height: 40px;
      width: auto;
      border-radius: 8px;
    }

    .logo h1 {
      font-size: 1.3rem;
      font-weight: 800;
      background: linear-gradient(135deg, #fff, var(--primary-color));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .btn-nav {
      padding: 10px 18px;
      border-radius: 50px;
      font-weight: 600;
      background: rgba(124, 58, 237, 0.1);
      color: var(--primary-color);
      border: 1px solid rgba(124, 58, 237, 0.3);
      text-decoration: none;
      transition: var(--transition);
      font-size: 0.9rem;
    }

    .btn-nav:hover {
      background: rgba(124, 58, 237, 0.2);
      box-shadow: var(--neon-shadow);
    }

    /* ===== MAIN SECTION ===== */
    .coverage-section {
      padding: 40px 16px;
      max-width: 1400px;
      margin: auto;
      text-align: center;
    }

    .coverage-title {
      font-size: clamp(1.8rem, 5vw, 2.5rem);
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #fff, var(--primary-glow));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .coverage-subtitle {
      color: var(--text-muted);
      margin-bottom: 24px;
      font-size: clamp(0.9rem, 2vw, 1rem);
    }

    .search-input {
      width: 100%;
      max-width: 500px;
      padding: 14px 24px;
      border-radius: 50px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(15, 23, 42, 0.6);
      color: white;
      margin: 0 auto 30px;
      outline: none;
      transition: var(--transition);
      font-size: 1rem;
    }

    .search-input:focus {
      border-color: var(--primary-color);
      box-shadow: var(--neon-shadow);
    }

    .search-input::placeholder { color: var(--text-muted); }

    /* ===== CONTENT GRID ===== */
    .content-grid {
      display: grid;
      grid-template-columns: 1fr 340px;
      gap: 24px;
      align-items: start;
    }

    /* ===== MAP WRAPPER ===== */
    .map-wrapper {
      background: var(--bg-card);
      backdrop-filter: blur(16px);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
      border: var(--glass-border);
      position: relative;
      min-height: 400px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .map-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    .map-title {
      font-weight: 600;
      color: var(--primary-glow);
      font-size: 1rem;
    }

    .zoom-controls {
      display: flex;
      gap: 6px;
    }

    .zoom-btn {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      background: rgba(124,58,237,0.1);
      color: var(--primary-color);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      font-size: 0.9rem;
    }

    .zoom-btn:hover {
      background: rgba(124,58,237,0.3);
      transform: scale(1.05);
    }

    .zoom-btn:active { transform: scale(0.95); }

    #map-svg-container {
      flex: 1;
      width: 100%;
      position: relative;
      overflow: hidden;
      cursor: grab;
    }

    #map-svg-container:active { cursor: grabbing; }

    .map-viewport {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
      transform-origin: center center;
    }

    svg {
      width: 100%;
      height: auto;
      max-height: 600px;
      filter: drop-shadow(0 0 10px rgba(124, 58, 237, 0.1));
    }

    /* ===== PATHS STYLING ===== */
    path {
      fill: #1e293b;
      stroke: rgba(255, 255, 255, 0.15);
      stroke-width: 0.5;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    /* Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ ÙØ¦Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ */
    path[data-speed="fast"] { fill: var(--color-fast); }
    path[data-speed="medium"] { fill: var(--color-medium); }
    path[data-speed="slow"] { fill: var(--color-slow); }

    path:hover {
      stroke: #fff;
      stroke-width: 1.5;
      filter: drop-shadow(0 0 10px currentColor);
      transform: scale(1.02);
      transform-origin: center;
      z-index: 10;
    }

    path.highlight {
      stroke: #fff !important;
      stroke-width: 2 !important;
      filter: drop-shadow(0 0 15px currentColor) !important;
      transform: scale(1.05);
      z-index: 20;
    }

    /* ===== SIDEBAR ===== */
    #sidebar {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .glass-card {
      background: var(--bg-card);
      backdrop-filter: blur(12px);
      border-radius: var(--radius-lg);
      border: var(--glass-border);
      padding: 20px;
      text-align: left;
    }

    .glass-card h2 {
      font-size: 1.1rem;
      margin-bottom: 16px;
      color: var(--primary-glow);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      padding-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .wilaya-detail-row {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      font-size: 0.9rem;
    }

    .wilaya-detail-row span:first-child {
      color: var(--text-muted);
    }

    .wilaya-detail-row span:last-child {
      font-weight: 600;
      color: var(--text-main);
    }

    /* ===== TOOLTIP ===== */
    .map-tooltip {
      position: fixed;
      background: rgba(15, 23, 42, 0.98);
      padding: 14px 18px;
      border-radius: 12px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s, visibility 0.2s;
      pointer-events: none;
      border: 1px solid var(--primary-color);
      min-width: 200px;
      z-index: 2000;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
    }

    .map-tooltip.show {
      opacity: 1;
      visibility: visible;
    }

    .tooltip-title {
      color: var(--primary-glow);
      font-weight: 800;
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 1rem;
    }

    .tooltip-row {
      display: flex;
      justify-content: space-between;
      margin: 5px 0;
      font-size: 0.85rem;
    }

    .tooltip-row span:first-child { color: var(--text-muted); }
    .tooltip-row span:last-child { font-weight: 600; }

    /* ===== LEGEND ===== */
    .legend {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
      padding: 12px;
      background: rgba(15,23,42,0.5);
      border-radius: 12px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .legend-dot {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .legend-dot.fast { background: var(--color-fast); }
    .legend-dot.medium { background: var(--color-medium); }
    .legend-dot.slow { background: var(--color-slow); }

    /* ===== FOOTER ===== */
    footer {
      text-align: center;
      padding: 30px 20px;
      margin-top: 40px;
      color: var(--text-muted);
      font-size: 0.9rem;
      border-top: 1px solid rgba(255,255,255,0.05);
    }

    /* ===== LOADER ===== */
    .loader {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      color: var(--text-muted);
      gap: 12px;
    }

    .loader i {
      font-size: 2rem;
      color: var(--primary-color);
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(0.9); }
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 1024px) {
      .content-grid {
        grid-template-columns: 1fr;
      }
      
      #sidebar {
        order: 2;
      }
      
      .map-wrapper {
        min-height: 350px;
      }
    }

    @media (max-width: 768px) {
      .navbar .container {
        flex-wrap: wrap;
        gap: 12px;
      }
      
      .logo h1 {
        font-size: 1.1rem;
      }
      
      .coverage-section {
        padding: 24px 12px;
      }
      
      .map-wrapper {
        padding: 16px;
      }
      
      .glass-card {
        padding: 16px;
      }
      
      .legend {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .zoom-controls {
        position: absolute;
        top: 12px;
        right: 12px;
        z-index: 100;
      }
    }

    @media (max-width: 480px) {
      .logo img { height: 32px; }
      .logo h1 { font-size: 1rem; }
      .btn-nav { padding: 8px 14px; font-size: 0.85rem; }
      
      .coverage-title { font-size: 1.5rem; }
      .search-input { padding: 12px 20px; font-size: 0.95rem; }
      
      .map-header { flex-direction: column; gap: 10px; align-items: flex-start; }
      
      .tooltip-title { font-size: 0.95rem; }
      .tooltip-row { font-size: 0.8rem; }
    }

    /* ===== ANIMATIONS ===== */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .glass-card { animation: fadeIn 0.4s ease; }
    path { animation: fadeIn 0.3s ease; }
  </style>
</head>

<body>

  <header>
    <nav class="navbar">
      <div class="container">
        <div class="logo">
          <img src="logo.jpg" alt="Amar Informatique">
          <h1>Amar Informatique</h1>
        </div>
        <a href="index.html" class="btn-nav"><i class="fas fa-store"></i> Boutique</a>
      </div>
    </nav>
  </header>

  <section class="coverage-section">
    <h1 class="coverage-title">ğŸ“ COUVERTURE DE LIVRAISON</h1>
    <p class="coverage-subtitle">Nous couvrons 58 Wilayas du territoire national algÃ©rien</p>

    <input type="text" id="wilayaSearch" class="search-input" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆÙ„Ø§ÙŠØ© Ø£Ùˆ Ø±Ù…Ø²...">

    <div class="content-grid">
      <div class="map-wrapper">
        <div class="map-header">
          <span class="map-title"><i class="fas fa-map-marked-alt"></i> Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª</span>
          <div class="zoom-controls">
            <button class="zoom-btn" id="zoomIn" title="ØªÙƒØ¨ÙŠØ±"><i class="fas fa-plus"></i></button>
            <button class="zoom-btn" id="zoomOut" title="ØªØµØºÙŠØ±"><i class="fas fa-minus"></i></button>
            <button class="zoom-btn" id="zoomReset" title="Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·"><i class="fas fa-expand"></i></button>
          </div>
        </div>
        
        <div id="map-svg-container">
          <div class="map-viewport" id="mapViewport">
            <div class="loader">
              <i class="fas fa-spinner"></i>
              <span>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø©...</span>
            </div>
          </div>
        </div>

        <div class="legend">
          <div class="legend-item"><span class="legend-dot fast"></span> Ø³Ø±ÙŠØ¹ â€” 24h Ã  48h</div>
          <div class="legend-item"><span class="legend-dot medium"></span> Ù…ØªÙˆØ³Ø· â€” 48h Ã  72h</div>
          <div class="legend-item"><span class="legend-dot slow"></span> Ø¨Ø¹ÙŠØ¯ â€” 72h Ã  96h</div>
        </div>
      </div>

      <div id="sidebar">
        <div class="glass-card">
          <h2><i class="fas fa-info-circle"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</h2>
          <div id="wilaya-info">
            <p style="color:var(--text-muted); font-style: italic; font-size: 0.9rem;">
              Ù…Ø±Ù‘Ø± Ø§Ù„ÙØ£Ø±Ø© Ø¹Ù„Ù‰ Ø£ÙŠ ÙˆÙ„Ø§ÙŠØ© Ù„Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
            </p>
          </div>
        </div>

        <div class="glass-card">
          <h2><i class="fas fa-truck"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</h2>
          <div class="wilaya-detail-row">
            <span>ğŸ  Ù„Ù„Ù…Ù†Ø²Ù„</span>
            <span>ÙŠØµÙ„ Ù„Ø¨Ø§Ø¨ Ø§Ù„Ù…Ù†Ø²Ù„</span>
          </div>
          <div class="wilaya-detail-row">
            <span>ğŸª Ù…Ù† Ø§Ù„Ù…ÙƒØªØ¨</span>
            <span>Ø£Ø±Ø®Øµ Ø³Ø¹Ø±</span>
          </div>
          <div class="wilaya-detail-row">
            <span>â±ï¸ Ø§Ù„Ù…Ø¯Ø©</span>
            <span>ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</span>
          </div>
          <div class="wilaya-detail-row">
            <span>ğŸ“ Ø§Ù„Ø¯Ø¹Ù…</span>
            <span>0559 46 99 56</span>
          </div>
        </div>
      </div>
    </div>

    <div class="map-tooltip" id="mapTooltip"></div>
  </section>

  <footer>
    &copy; 2026 Amar Informatique. Premium Tech Store.
  </footer>

  <script>
    // ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª =====
    const wilayasData = {
      "1": { name: "Adrar", nameAr: "Ø£Ø¯Ø±Ø§Ø±", code: "01", time: "72h Ã  96h", speed: "slow", home: 1500, desk: 1000 },
      "2": { name: "Chlef", nameAr: "Ø§Ù„Ø´Ù„Ù", code: "02", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "3": { name: "Laghouat", nameAr: "Ø§Ù„Ø£ØºÙˆØ§Ø·", code: "03", time: "48h Ã  72h", speed: "medium", home: 900, desk: 600 },
      "4": { name: "Oum El Bouaghi", nameAr: "Ø£Ù… Ø§Ù„Ø¨ÙˆØ§Ù‚ÙŠ", code: "04", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "5": { name: "Batna", nameAr: "Ø¨Ø§ØªÙ†Ø©", code: "05", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "6": { name: "BÃ©jaÃ¯a", nameAr: "Ø¨Ø¬Ø§ÙŠØ©", code: "06", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "7": { name: "Biskra", nameAr: "Ø¨Ø³ÙƒØ±Ø©", code: "07", time: "48h Ã  72h", speed: "medium", home: 900, desk: 500 },
      "8": { name: "BÃ©char", nameAr: "Ø¨Ø´Ø§Ø±", code: "08", time: "72h Ã  96h", speed: "slow", home: 1200, desk: 800 },
      "9": { name: "Blida", nameAr: "Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©", code: "09", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "10": { name: "Bouira", nameAr: "Ø§Ù„Ø¨ÙˆÙŠØ±Ø©", code: "10", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "11": { name: "Tamanrasset", nameAr: "ØªÙ…Ù†Ø±Ø§Ø³Øª", code: "11", time: "72h Ã  96h", speed: "slow", home: 2000, desk: 1500 },
      "12": { name: "TÃ©bessa", nameAr: "ØªØ¨Ø³Ø©", code: "12", time: "48h Ã  72h", speed: "medium", home: 850, desk: 500 },
      "13": { name: "Tlemcen", nameAr: "ØªÙ„Ù…Ø³Ø§Ù†", code: "13", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "14": { name: "Tiaret", nameAr: "ØªÙŠØ§Ø±Øª", code: "14", time: "48h Ã  72h", speed: "medium", home: 800, desk: 500 },
      "15": { name: "Tizi Ouzou", nameAr: "ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ", code: "15", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "16": { name: "Alger", nameAr: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", code: "16", time: "24h Ã  48h", speed: "fast", home: 600, desk: 400 },
      "17": { name: "Djelfa", nameAr: "Ø§Ù„Ø¬Ù„ÙØ©", code: "17", time: "48h Ã  72h", speed: "medium", home: 900, desk: 600 },
      "18": { name: "Jijel", nameAr: "Ø¬ÙŠØ¬Ù„", code: "18", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "19": { name: "SÃ©tif", nameAr: "Ø³Ø·ÙŠÙ", code: "19", time: "24h Ã  48h", speed: "fast", home: 550, desk: 300 },
      "20": { name: "SaÃ¯da", nameAr: "Ø³Ø¹ÙŠØ¯Ø©", code: "20", time: "48h Ã  72h", speed: "medium", home: 900, desk: 500 },
      "21": { name: "Skikda", nameAr: "Ø³ÙƒÙŠÙƒØ¯Ø©", code: "21", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "22": { name: "Sidi Bel AbbÃ¨s", nameAr: "Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³", code: "22", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "23": { name: "Annaba", nameAr: "Ø¹Ù†Ø§Ø¨Ø©", code: "23", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "24": { name: "Guelma", nameAr: "Ù‚Ø§Ù„Ù…Ø©", code: "24", time: "24h Ã  48h", speed: "fast", home: 850, desk: 500 },
      "25": { name: "Constantine", nameAr: "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", code: "25", time: "24h Ã  48h", speed: "fast", home: 650, desk: 400 },
      "26": { name: "MÃ©dÃ©a", nameAr: "Ø§Ù„Ù…Ø¯ÙŠØ©", code: "26", time: "48h Ã  72h", speed: "medium", home: 800, desk: 500 },
      "27": { name: "Mostaganem", nameAr: "Ù…Ø³ØªØºØ§Ù†Ù…", code: "27", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "28": { name: "M'Sila", nameAr: "Ø§Ù„Ù…Ø³ÙŠÙ„Ø©", code: "28", time: "48h Ã  72h", speed: "medium", home: 700, desk: 450 },
      "29": { name: "Mascara", nameAr: "Ù…Ø¹Ø³ÙƒØ±", code: "29", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "30": { name: "Ouargla", nameAr: "ÙˆØ±Ù‚Ù„Ø©", code: "30", time: "72h Ã  96h", speed: "slow", home: 1000, desk: 600 },
      "31": { name: "Oran", nameAr: "ÙˆÙ‡Ø±Ø§Ù†", code: "31", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "32": { name: "El Bayadh", nameAr: "Ø§Ù„Ø¨ÙŠØ¶", code: "32", time: "72h Ã  96h", speed: "slow", home: 1200, desk: 800 },
      "33": { name: "Illizi", nameAr: "Ø¥Ù„ÙŠØ²ÙŠ", code: "33", time: "72h Ã  96h", speed: "slow", home: 1900, desk: 1500 },
      "34": { name: "Bordj Bou ArrÃ©ridj", nameAr: "Ø¨Ø±Ø¬ Ø¨ÙˆØ¹Ø±ÙŠØ±ÙŠØ¬", code: "34", time: "24h Ã  48h", speed: "fast", home: 600, desk: 400 },
      "35": { name: "BoumerdÃ¨s", nameAr: "Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³", code: "35", time: "24h Ã  48h", speed: "fast", home: 700, desk: 450 },
      "36": { name: "El Tarf", nameAr: "Ø§Ù„Ø·Ø§Ø±Ù", code: "36", time: "24h Ã  48h", speed: "fast", home: 850, desk: 500 },
      "37": { name: "Tindouf", nameAr: "ØªÙ†Ø¯ÙˆÙ", code: "37", time: "72h Ã  96h", speed: "slow", home: 1700, desk: 1000 },
      "38": { name: "Tissemsilt", nameAr: "ØªØ³Ù…Ø³ÙŠÙ„Øª", code: "38", time: "48h Ã  72h", speed: "medium", home: 850, desk: 500 },
      "39": { name: "El Oued", nameAr: "Ø§Ù„ÙˆØ§Ø¯ÙŠ", code: "39", time: "72h Ã  96h", speed: "slow", home: 1000, desk: 600 },
      "40": { name: "Khenchela", nameAr: "Ø®Ù†Ø´Ù„Ø©", code: "40", time: "48h Ã  72h", speed: "medium", home: 600, desk: 500 },
      "41": { name: "Souk Ahras", nameAr: "Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³", code: "41", time: "24h Ã  48h", speed: "fast", home: 850, desk: 500 },
      "42": { name: "Tipaza", nameAr: "ØªÙŠØ¨Ø§Ø²Ø©", code: "42", time: "24h Ã  48h", speed: "fast", home: 600, desk: 450 },
      "43": { name: "Mila", nameAr: "Ù…ÙŠÙ„Ø©", code: "43", time: "24h Ã  48h", speed: "fast", home: 600, desk: 500 },
      "44": { name: "AÃ¯n Defla", nameAr: "Ø¹ÙŠÙ† Ø§Ù„Ø¯ÙÙ„Ù‰", code: "44", time: "48h Ã  72h", speed: "medium", home: 800, desk: 500 },
      "45": { name: "NaÃ¢ma", nameAr: "Ø§Ù„Ù†Ø¹Ø§Ù…Ø©", code: "45", time: "72h Ã  96h", speed: "slow", home: 1200, desk: 800 },
      "46": { name: "AÃ¯n TÃ©mouchent", nameAr: "Ø¹ÙŠÙ† ØªÙ…ÙˆØ´Ù†Øª", code: "46", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "47": { name: "GhardaÃ¯a", nameAr: "ØºØ±Ø¯Ø§ÙŠØ©", code: "47", time: "72h Ã  96h", speed: "slow", home: 1000, desk: 600 },
      "48": { name: "Relizane", nameAr: "ØºÙ„ÙŠØ²Ø§Ù†", code: "48", time: "24h Ã  48h", speed: "fast", home: 800, desk: 500 },
      "49": { name: "Timimoun", nameAr: "ØªÙ…ÙŠÙ…ÙˆÙ†", code: "49", time: "72h Ã  96h", speed: "slow", home: 1500, desk: 1000 },
      "50": { name: "Bordj Badji Mokhtar", nameAr: "Ø¨Ø±Ø¬ Ø¨Ø§Ø¬ÙŠ Ù…Ø®ØªØ§Ø±", code: "50", time: "72h Ã  96h", speed: "slow", home: 1600, desk: 1500 },
      "51": { name: "Ouled Djellal", nameAr: "Ø£ÙˆÙ„Ø§Ø¯ Ø¬Ù„Ø§Ù„", code: "51", time: "72h Ã  96h", speed: "slow", home: 900, desk: 500 },
      "52": { name: "BÃ©ni AbbÃ¨s", nameAr: "Ø¨Ù†ÙŠ Ø¹Ø¨Ø§Ø³", code: "52", time: "72h Ã  96h", speed: "slow", home: 1200, desk: 800 },
      "53": { name: "In Salah", nameAr: "Ø¹ÙŠÙ† ØµØ§Ù„Ø­", code: "53", time: "72h Ã  96h", speed: "slow", home: 1800, desk: 1200 },
      "54": { name: "In Guezzam", nameAr: "Ø¹ÙŠÙ† Ù‚Ø²Ø§Ù…", code: "54", time: "72h Ã  96h", speed: "slow", home: 2200, desk: 3500 },
      "55": { name: "Touggourt", nameAr: "ØªÙ‚Ø±Øª", code: "55", time: "72h Ã  96h", speed: "slow", home: 1000, desk: 600 },
      "56": { name: "Djanet", nameAr: "Ø¬Ø§Ù†Øª", code: "56", time: "72h Ã  96h", speed: "slow", home: 2000, desk: 3500 },
      "57": { name: "El M'Ghair", nameAr: "Ø§Ù„Ù…ØºÙŠØ±", code: "57", time: "72h Ã  96h", speed: "slow", home: 1000, desk: 1800 },
      "58": { name: "El Meniaa", nameAr: "Ø§Ù„Ù…Ù†ÙŠØ¹Ø©", code: "58", time: "72h Ã  96h", speed: "slow", home: 1000, desk: 600 }
    };

    // ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø®Ø±ÙŠØ·Ø© =====
    const tooltip = document.getElementById("mapTooltip");
    const wilayaInfo = document.getElementById("wilaya-info");
    const mapContainer = document.getElementById("map-svg-container");
    const viewport = document.getElementById("mapViewport");
    let geoJsonData = null;
    
    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙƒØ¨ÙŠØ±/Ø§Ù„ØªØ­Ø±ÙŠÙƒ
    let scale = 1;
    let panX = 0, panY = 0;
    let isDragging = false;
    let startX, startY;
    const minScale = 1;
    const maxScale = 4;
    const zoomStep = 0.25;

    // ===== ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø±ÙŠØ·Ø© =====
    async function loadMapData() {
      console.log("ğŸ—ºï¸ Starting map load...");
      
      // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ù…Ù„Ù JS Ù…Ø­Ù„ÙŠ Ø£ÙˆÙ„Ø§Ù‹
      try {
        if (typeof ALGERIA_PATHS !== 'undefined' && Array.isArray(ALGERIA_PATHS)) {
          renderMapFromPaths(ALGERIA_PATHS);
          return;
        }
      } catch(e) { console.log("No local paths data"); }

      // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ GeoJSON
      try {
        const response = await fetch('algeria.geojson');
        if (response.ok) {
          geoJsonData = await response.json();
          renderMap(geoJsonData);
          return;
        }
      } catch(e) { console.log("GeoJSON fetch failed"); }

      // Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¹Ø±Ø¶ (Ù…Ø³ØªØ·ÙŠÙ„Ø§Øª ØªÙ…Ø«Ù„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª)
      console.log("âš ï¸ Using fallback demo data");
      renderDemoMap();
    }

    // ===== Ø±Ø³Ù… Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù…Ù† GeoJSON =====
    function renderMap(geoData) {
      renderSVG(geoData.features);
    }

    // ===== Ø±Ø³Ù… Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù…Ù† ALGERIA_PATHS =====
    function renderMapFromPaths(pathsData) {
      const features = pathsData.map(p => ({
        id: `wilaya-${p.code.padStart(2,'0')}`,
        properties: { name: p.name, code: p.code },
        geometry: { type: 'Polygon', coordinates: [] }
      }));
      renderSVG(features, pathsData);
    }

    // ===== Ø±Ø³Ù… SVG =====
    function renderSVG(features, pathsData = null) {
      mapContainer.querySelector('.loader')?.remove();
      
      const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      svg.setAttribute("viewBox", "0 0 900 760");
      svg.setAttribute("preserveAspectRatio", "xMidYMid meet");
      svg.setAttribute("id", "algeria-map");

      features.forEach((feature, idx) => {
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        const code = feature.properties?.code?.padStart(2,'0') || feature.id?.split('-')[1];
        const wilayaNum = parseInt(code);
        const data = wilayasData[wilayaNum];
        
        // ØªØ¹ÙŠÙŠÙ† Ù…Ø³Ø§Ø± SVG
        if (pathsData && pathsData[idx]?.d) {
          path.setAttribute("d", pathsData[idx].d);
        } else {
          // Ù…Ø³Ø§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø¹Ø±Ø¶
          path.setAttribute("d", generateDemoPath(idx));
        }
        
        path.setAttribute("id", feature.id || `wilaya-${code}`);
        path.setAttribute("class", "wilaya-path");
        if (data?.speed) path.setAttribute("data-speed", data.speed);
        
        // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªÙØ§Ø¹Ù„
        setupPathEvents(path, data, code);
        svg.appendChild(path);
      });

      viewport.innerHTML = '';
      viewport.appendChild(svg);
      updateTransform();
    }

    // ===== Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø¹Ø±Ø¶ =====
    function renderDemoMap() {
      const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      svg.setAttribute("viewBox", "0 0 900 760");
      svg.setAttribute("preserveAspectRatio", "xMidYMid meet");

      // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø´ÙƒØ§Ù„ ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©
      for (let i = 1; i <= 20; i++) {
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        const data = wilayasData[i];
        const x = 200 + (i % 10) * 50;
        const y = 100 + Math.floor(i / 10) * 60;
        
        path.setAttribute("d", `M ${x},${y} L ${x+40},${y} L ${x+35},${y+30} L ${x+5},${y+35} Z`);
        path.setAttribute("id", `wilaya-${String(i).padStart(2,'0')}`);
        path.setAttribute("class", "wilaya-path");
        if (data?.speed) path.setAttribute("data-speed", data.speed);
        
        setupPathEvents(path, data, String(i).padStart(2,'0'));
        svg.appendChild(path);
      }

      viewport.innerHTML = '';
      viewport.appendChild(svg);
      updateTransform();
    }

    // ===== ØªÙˆÙ„ÙŠØ¯ Ù…Ø³Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ =====
    function generateDemoPath(index) {
      const x = 150 + (index % 12) * 45 + Math.random() * 20;
      const y = 80 + Math.floor(index / 12) * 50 + Math.random() * 15;
      const w = 30 + Math.random() * 20;
      const h = 25 + Math.random() * 15;
      return `M ${x},${y} L ${x+w},${y} L ${x+w-5},${y+h} L ${x+5},${y+h-5} Z`;
    }

    // ===== Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø³Ø§Ø± =====
    function setupPathEvents(path, data, code) {
      if (!data) return;

      path.addEventListener('mouseenter', (e) => {
        showTooltip(e, data);
        showInfo(data, code);
        zoomToPath(path);
      });

      path.addEventListener('mousemove', (e) => {
        tooltip.style.left = (e.clientX + 12) + 'px';
        tooltip.style.top = (e.clientY + 12) + 'px';
      });

      path.addEventListener('mouseleave', () => {
        tooltip.classList.remove('show');
        // Ù„Ø§ Ù†Ø¹ÙŠØ¯ Ø§Ù„ØªØµØºÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¬Ø±Ø¨Ø©
      });

      path.addEventListener('click', (e) => {
        e.stopPropagation();
        document.querySelectorAll('path').forEach(p => p.classList.remove('highlight'));
        path.classList.add('highlight');
        showInfo(data, code);
      });

      // Ø¯Ø¹Ù… Ø§Ù„Ù„Ù…Ø³ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
      path.addEventListener('touchstart', (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        const event = new MouseEvent('mouseenter', {
          clientX: touch.clientX, clientY: touch.clientY
        });
        path.dispatchEvent(event);
      });
    }

    // ===== Ø¹Ø±Ø¶ Tooltip =====
    function showTooltip(e, data) {
      tooltip.innerHTML = `
        <div class="tooltip-title">${data.name} | ${data.nameAr}</div>
        <div class="tooltip-row"><span>ğŸ  Ù„Ù„Ù…Ù†Ø²Ù„:</span><span>${data.home} DA</span></div>
        <div class="tooltip-row"><span>ğŸª Ù…Ù† Ø§Ù„Ù…ÙƒØªØ¨:</span><span>${data.desk} DA</span></div>
        <div class="tooltip-row"><span>â±ï¸ Ø§Ù„Ù…Ø¯Ø©:</span><span>${data.time}</span></div>
      `;
      tooltip.classList.add('show');
    }

    // ===== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø§ÙŠØ¯Ø¨Ø§Ø± =====
    function showInfo(data, code) {
      wilayaInfo.innerHTML = `
        <div class="wilaya-detail-row"><span>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</span><span>${data.name} (${data.code})</span></div>
        <div class="wilaya-detail-row"><span>Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©:</span><span>${data.nameAr}</span></div>
        <div class="wilaya-detail-row"><span>â±ï¸ Ù…Ø¯Ø© Ø§Ù„ØªÙˆØµÙŠÙ„:</span><span>${data.time}</span></div>
        <div class="wilaya-detail-row"><span>ğŸ  Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø²Ù„:</span><span>${data.home} DA</span></div>
        <div class="wilaya-detail-row"><span>ğŸª Ø³Ø¹Ø± Ø§Ù„Ù…ÙƒØªØ¨:</span><span>${data.desk} DA</span></div>
        <div class="wilaya-detail-row" style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.1)">
          <span>ğŸ¯ Ø§Ù„ÙØ¦Ø©:</span>
          <span style="color:${data.speed==='fast'?'var(--color-fast)':data.speed==='medium'?'var(--color-medium)':'var(--color-slow)'}">
            ${data.speed==='fast'?'âœ… Ø³Ø±ÙŠØ¹':data.speed==='medium'?'âš¡ Ù…ØªÙˆØ³Ø·':'ğŸ”´ Ø¨Ø¹ÙŠØ¯'}
          </span>
        </div>
      `;
    }

    // ===== Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„ØªØ­Ø±ÙŠÙƒ =====
    function updateTransform() {
      viewport.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
    }

    function zoomToPath(path) {
      const bbox = path.getBBox();
      const container = mapContainer.getBoundingClientRect();
      const viewBox = viewport.querySelector('svg').viewBox.baseVal;
      
      // Ø­Ø³Ø§Ø¨ Ù…Ø±ÙƒØ² Ø§Ù„ÙˆÙ„Ø§ÙŠØ©
      const centerX = bbox.x + bbox.width / 2;
      const centerY = bbox.y + bbox.height / 2;
      
      // Ø­Ø³Ø§Ø¨ Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
      const pathWidth = Math.max(bbox.width, bbox.height);
      const targetScale = Math.min(2.5, Math.max(1.5, 600 / pathWidth));
      
      // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„Ù…Ø±ÙƒØ² Ø§Ù„ÙˆÙ„Ø§ÙŠØ©
      panX = (container.width / 2) - (centerX * targetScale);
      panY = (container.height / 2) - (centerY * targetScale);
      scale = targetScale;
      
      updateTransform();
      
      // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„Ù†Ø´Ø§Ø·
      clearTimeout(window.resetZoomTimeout);
      window.resetZoomTimeout = setTimeout(resetZoom, 5000);
    }

    function zoomIn() {
      scale = Math.min(maxScale, scale + zoomStep);
      updateTransform();
    }

    function zoomOut() {
      scale = Math.max(minScale, scale - zoomStep);
      if (scale === minScale) { panX = 0; panY = 0; }
      updateTransform();
    }

    function resetZoom() {
      scale = 1;
      panX = 0;
      panY = 0;
      updateTransform();
      document.querySelectorAll('path').forEach(p => p.classList.remove('highlight'));
    }

    // ===== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªØ­Ø±ÙŠÙƒ Ø¨Ø§Ù„Ø³Ø­Ø¨ =====
    viewport.addEventListener('mousedown', (e) => {
      if (e.target.tagName === 'path') return;
      isDragging = true;
      startX = e.clientX - panX;
      startY = e.clientY - panY;
      viewport.style.cursor = 'grabbing';
      e.preventDefault();
    });

    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      panX = e.clientX - startX;
      panY = e.clientY - startY;
      updateTransform();
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      viewport.style.cursor = 'grab';
    });

    // Ø¯Ø¹Ù… Ø§Ù„Ù„Ù…Ø³ Ù„Ù„ØªØ­Ø±ÙŠÙƒ
    viewport.addEventListener('touchstart', (e) => {
      if (e.target.tagName === 'path') return;
      isDragging = true;
      startX = e.touches[0].clientX - panX;
      startY = e.touches[0].clientY - panY;
    });

    document.addEventListener('touchmove', (e) => {
      if (!isDragging) return;
      panX = e.touches[0].clientX - startX;
      panY = e.touches[0].clientY - startY;
      updateTransform();
    });

    document.addEventListener('touchend', () => { isDragging = false; });

    // Ø¹Ø¬Ù„Ø© Ø§Ù„Ù…Ø§ÙˆØ³ Ù„Ù„ØªÙƒØ¨ÙŠØ±
    viewport.addEventListener('wheel', (e) => {
      e.preventDefault();
      if (e.deltaY < 0) zoomIn();
      else zoomOut();
    }, { passive: false });

    // ===== Ø§Ù„Ø¨Ø­Ø« =====
    function handleSearch() {
      const val = document.getElementById("wilayaSearch").value.toLowerCase().trim();
      let found = false;

      document.querySelectorAll('path').forEach(path => {
        const id = path.getAttribute('id');
        const code = id?.split('-')[1];
        const data = wilayasData[parseInt(code)];
        if (!data) return;

        const matches = data.name.toLowerCase().includes(val) ||
                       data.nameAr.includes(val) ||
                       data.code === val;

        if (val === "") {
          path.style.opacity = "1";
          path.classList.remove('highlight');
        } else if (matches) {
          path.style.opacity = "1";
          path.classList.add('highlight');
          if (!found) {
            path.dispatchEvent(new Event('mouseenter'));
            zoomToPath(path);
            found = true;
          }
        } else {
          path.style.opacity = "0.15";
          path.classList.remove('highlight');
        }
      });

      if (!found && val !== "") {
        wilayaInfo.innerHTML = `<p style="color:#ef4444">âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ "<strong>${val}</strong>"</p>`;
      }
    }

    document.getElementById("wilayaSearch").addEventListener("input", handleSearch);
    document.getElementById("zoomIn").addEventListener("click", zoomIn);
    document.getElementById("zoomOut").addEventListener("click", zoomOut);
    document.getElementById("zoomReset").addEventListener("click", resetZoom);

    // ===== Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ =====
    window.addEventListener('load', loadMapData);
    
    // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ø¨Ø§Ù„Ù„Ù…Ø³ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
    document.addEventListener('touchstart', function(e) {
      if (e.touches.length > 1) e.preventDefault();
    }, { passive: false });

    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(e) {
      const now = Date.now();
      if (now - lastTouchEnd <= 300) e.preventDefault();
      lastTouchEnd = now;
    }, { passive: false });
  </script>
</body>
</html>
